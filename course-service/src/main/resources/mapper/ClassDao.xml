<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yuan.courseservice.dao.ClassDao">

    <resultMap type="com.yuan.courseservice.entity.Class" id="ClassMap">
        <result property="claId" column="cla_id" jdbcType="INTEGER"/>
        <result property="claName" column="cla_name" jdbcType="VARCHAR"/>
        <result property="claGrade" column="cla_grade" jdbcType="VARCHAR"/>
        <result property="claNum" column="cla_num" jdbcType="INTEGER"/>
        <result property="claMajor" column="cla_major" jdbcType="VARCHAR"/>
    </resultMap>

    <!-- 批量插入 -->
    <insert id="insertBatch" keyProperty="claId" useGeneratedKeys="true">
        insert into bishe.class(cla_name, cla_grade, cla_num, cla_major)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.claName}, #{entity.claGrade}, #{entity.claNum}, #{entity.claMajor})
        </foreach>
    </insert>
    <!-- 批量插入或按主键更新 -->
    <insert id="insertOrUpdateBatch" keyProperty="claId" useGeneratedKeys="true">
        insert into bishe.class(cla_name, cla_grade, cla_num, cla_major)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.claName}, #{entity.claGrade}, #{entity.claNum}, #{entity.claMajor})
        </foreach>
        on duplicate key update
        cla_name = values(cla_name) , cla_grade = values(cla_grade) , cla_num = values(cla_num) , cla_major =
        values(cla_major)
    </insert>

</mapper>

